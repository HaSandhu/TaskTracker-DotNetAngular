<form #taskForm="ngForm" (ngSubmit)="createTask()"> <h1> Create a New Task! </h1>
    <!-- Title -->
    <div class="form-group"> <label for="taskTitle">Title:</label> <input type="text" id="taskTitle" name="taskTitle"
               [(ngModel)]="taskTitle" #titleField="ngModel" required minlength="3">
        <div *ngIf="titleField.invalid && (titleField.dirty || titleField.touched)" class="error-message">
            <div *ngIf="titleField.errors?.['required']">Title is required.</div>
            <div *ngIf="titleField.errors?.['minlength']">Title must be at least 3 characters.</div>
        </div>
    </div>
    <!-- Description -->
    <div class="form-group"> <label for="taskDescription">Description:</label> <textarea id="taskDescription" name="taskDescription"
                  [(ngModel)]="taskDescription"></textarea>
    </div>

    <div class="form-group"> <label>Priority:</label> <div class="priority-options"> <label class="priority-button low" [class.selected]="taskPriority === 'low'">
                <input type="radio" name="taskPriority" value="low" [(ngModel)]="taskPriority"> Low
            </label>
            <label class="priority-button medium" [class.selected]="taskPriority === 'medium'">
                <input type="radio" name="taskPriority" value="medium" [(ngModel)]="taskPriority"> Medium
            </label>
            <label class="priority-button high" [class.selected]="taskPriority === 'high'">
                <input type="radio" name="taskPriority" value="high" [(ngModel)]="taskPriority"> High
            </label>
        </div>
    </div>

    <!-- Due Date input -->
    <div class="form-group"> 
        <label for="taskDueDate">Due Date:</label>
        <input [(ngModel)]="taskDueDate" type="date" id="taskDueDate" name="taskDueDate" >
    </div>

    <!-- tags input -->
    <div class="form-group">
        <label for="tagInput">Tags:</label>
        <div class="tags-input-group"> <input type="text" id="tagInput" name="tagInput" placeholder="Add tag (e.g., frontend)" [(ngModel)]="currentTag" (keyup.enter)="addTag()">
            <button type="button" (click)="addTag()">Add Tag</button>
        </div>
        <div *ngIf="tags.length" class="tag-list">
            <span *ngFor="let tag of tags; let i = index" class="tag-bubble">
                {{tag}}
                <span class="remove-tag" (click)="removeTag(i)">x</span>
            </span>
        </div>
    </div>

    <div class="form-actions"> <button type="submit" [disabled]="taskForm.invalid">Create this Task</button>
        <button type="button" (click)="resetForm()">Clear Form</button>
    </div>
</form>

<div *ngIf="wasCreated" class="alert success-alert">
    {{ successMessage }} ðŸŽ‰
</div>